<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: uyv.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="uyvColor.html">uyvColor</a></div><div class="sidebar-section-children"><a href="uyvQuadTree.html">uyvQuadTree</a></div><div class="sidebar-section-children"><a href="uyvRectangle.html">uyvRectangle</a></div><div class="sidebar-section-children"><a href="uyvVector2D.html">uyvVector2D</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-namespaces"><div>Namespaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="uyvType.html">uyvType</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#uyvBackground">uyvBackground</a></div><div class="sidebar-section-children"><a href="global.html#uyvCanvasCtx">uyvCanvasCtx</a></div><div class="sidebar-section-children"><a href="global.html#uyvCircle">uyvCircle</a></div><div class="sidebar-section-children"><a href="global.html#uyvCreateScreen">uyvCreateScreen</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentFillColor">uyvCurrentFillColor</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentStrokeColor">uyvCurrentStrokeColor</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentStrokeWeight">uyvCurrentStrokeWeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvDeltaTime">uyvDeltaTime</a></div><div class="sidebar-section-children"><a href="global.html#uyvFill">uyvFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvFrameRate">uyvFrameRate</a></div><div class="sidebar-section-children"><a href="global.html#uyvGetHeight">uyvGetHeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvGetWidth">uyvGetWidth</a></div><div class="sidebar-section-children"><a href="global.html#uyvInfinity">uyvInfinity</a></div><div class="sidebar-section-children"><a href="global.html#uyvKey">uyvKey</a></div><div class="sidebar-section-children"><a href="global.html#uyvLine">uyvLine</a></div><div class="sidebar-section-children"><a href="global.html#uyvLoadImageAndData">uyvLoadImageAndData</a></div><div class="sidebar-section-children"><a href="global.html#uyvNoFill">uyvNoFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvNoStroke">uyvNoStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvNormalizeAlpha">uyvNormalizeAlpha</a></div><div class="sidebar-section-children"><a href="global.html#uyvPoint">uyvPoint</a></div><div class="sidebar-section-children"><a href="global.html#uyvPop">uyvPop</a></div><div class="sidebar-section-children"><a href="global.html#uyvPush">uyvPush</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectFill">uyvRectFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectFillCenter">uyvRectFillCenter</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStroke">uyvRectStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStrokeCenter">uyvRectStrokeCenter</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStrokeCenterHalf">uyvRectStrokeCenterHalf</a></div><div class="sidebar-section-children"><a href="global.html#uyvScale">uyvScale</a></div><div class="sidebar-section-children"><a href="global.html#uyvStroke">uyvStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvStrokeWeight">uyvStrokeWeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvTranslate">uyvTranslate</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">uyv.js</h1></header><article><pre class="prettyprint source lang-js"><code>// @ts-check

// Violet Ultra Engine (JS)
// npx jsdoc -c jsdoc.json

// Unsigned integers (can only store non-negative numbers):

// uint8: 0 to 255 (2^8 - 1)
// uint16: 0 to 65,535 (2^16 - 1)
// uint32: 0 to 4,294,967,295 (2^32 - 1)
// uint64: 0 to 18,446,744,073,709,551,615 (2^64 - 1)

// Signed integers (can store both positive and negative numbers):

// int8: -128 to 127 (2^7 to 2^7 - 1)
// int16: -32,768 to 32,767 (2^15 to 2^15 - 1)
// int32: -2,147,483,648 to 2,147,483,647 (2^31 to 2^31 - 1)
// int64: -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807 (2^63 to 2^63 - 1)

// Special mentions:

// byte: Often equivalent to uint8 (0 to 255), but in some languages like Java, it's signed (-128 to 127)
// short: Often equivalent to int16
// int: Often equivalent to int32, but can vary by language/platform
// long: Often equivalent to int64, but can vary by language/platform

// Language-specific types:

// size_t: Unsigned integer type, used for sizes and counts, size depends on platform (usually 32 or 64 bits)
// ptrdiff_t: Signed integer type, used for pointer arithmetic, size depends on platform

// how to keep things private
// var beNice = (function() {
//   "use strict";
//
//   // My public methods will get added to this object
//   var publicAPIs = {};
//
//   // A private method
//   var saySomethingNice = function(somethingNice) {
//     alert(somethingNice);
//   };
//
//   // A public method
//   publicAPIs.smile = function(message) {
//     if (message) {
//       saySomethingNice(message);
//     } else {
//       saySomethingNice("You make the world better just by being you!");
//     }
//   };
//
//   // Return our public methods so that they can be accessed
//   return publicAPIs;
// })();

/**
 * @namespace uyvType
 */
const uyvType = {};

// Aliases
/**
 * @typedef {0 | 1} uyvType.bit Either 0 or 1
 * @description Bit - Either 0 or 1
 */
/**
 * @typedef {number} uyvType.uint8 An 8-bit unsigned integer (0-255) inclusive
 * @description An 8-bit unsigned integer (0-255) inclusive
 */
/**
 * @typedef {number} uyvType.uint16 An 16-bit unsigned integer (0-65535)
 * inclusive
 * @description An 16-bit unsigned integer (0-65535) inclusive
 */
/**
 * @typedef {number} uyvType.double Double-precision floating point number
 * @description Double-precision floating point number
 */
/**
 * @typedef {HTMLImageElement} uyvType.Image HTML Image Element
 * @description Used to draw images onto the canvas
 */
uyvType.Image = HTMLImageElement;
/**
 * @typedef {ImageData} uyvType.ImageData HTML Image Element
 * @description Used to draw images onto the canvas
 */
uyvType.ImageData = ImageData;

/**
 * @ignore
 * @param {*} value Takes in any given argument.
 * @returns {boolean} Bool. Whether a var is of type number and finite.
 */
function uyvIsNumber(value) {
  return typeof value === "number" &amp;&amp; isFinite(value);
}

/**
 * @ignore
 * @memberof uyvType
 * @param {number} value number
 * @returns {uyvType.bit} uyvType.bit
 */
uyvType.SetBit = function(value) {
  return value ? 1 : 0;
};

/**
 * Recursively processes an n-dimensional array and ensures all values are either 0 or 1.
 * This function maintains the original structure of the input array, preserving its dimensions.
 * @memberof uyvType
 * @param {*} value any. The input array or number to process. Can be a multi-dimensional array or a single number.
 * @returns {*} Array or number with all values set to 0 or 1. Maintaining the original structure.
 */
uyvType.NormalizeBits = function(value) {
  if (Array.isArray(value)) {
    return value.map(uyvType.NormalizeBits);
  } else {
    return uyvType.SetBit(value);
  }
};

/**
 * @ignore
 * @memberof uyvType
 * @param {number} value number
 * @returns {uyvType.uint8} uyvType.uint8. An integer value between 0 and 255 (inclusive)
 */
uyvType.SetUint8 = function(value) {
  return Math.max(0, Math.min(255, Math.floor(value)));
};

/**
 * Recursively processes an n-dimensional array and ensures all values are integers between 0 and 255 (inclusive).
 * This function maintains the original structure of the input array, preserving its dimensions.
 * Floating-point numbers are rounded down to integers.
 * @memberof uyvType
 * @param {*} value any. The input array or number to process. Can be a multi-dimensional array or a single number.
 * @returns {*} Array or number with all values set to integers between 0 and 255. Maintaining the original structure.
 */
uyvType.NormalizeUint8s = function(value) {
  if (Array.isArray(value)) {
    return value.map(uyvType.NormalizeUint8s);
  } else {
    return uyvType.SetUint8(value);
  }
};

/**
 * @ignore
 * @memberof uyvType
 * @param {number} value number
 * @returns {uyvType.uint16} An integer value between 0 and 65535 (inclusive)
 */
uyvType.SetUint16 = function(value) {
  return Math.max(0, Math.min(65535, Math.floor(value)));
};

/**
 * Recursively processes an n-dimensional array and ensures all values are integers between 0 and 65535 (inclusive).
 * This function maintains the original structure of the input array, preserving its dimensions.
 * Floating-point numbers are rounded down to integers.
 * @memberof uyvType
 * @param {*} value any. The input array or number to process. Can be a multi-dimensional array or a single number.
 * @returns {*} Array or number with all values set to integers between 0 and 65535. Maintaining the original structure.
 */
uyvType.NormalizeUint16s = function(value) {
  if (Array.isArray(value)) {
    return value.map(uyvType.NormalizeUint16s);
  } else {
    return uyvType.SetUint16(value);
  }
};

// -----------------------------------------------------------------------------

// Global Variables and Constants
/**
 * Maximum possible number
 * @type {number}
 */
const uyvInfinity = Number.MAX_VALUE;
/**
 * Maximum possible number
 * @ignore
 * @type {number}
 */
const uyvInfinityMax = Number.MAX_VALUE;
/**
 * Minimum possible number
 * @ignore
 * @type {number}
 */
const uyvInfinityMin = Number.MIN_VALUE;
// /** @type {HTMLCanvasElement} */
// let uyvScreen;
/**
 * @ignore
 * @type {uyvType.uint16}
 */
let uyvWidth;
/**
 * @ignore
 * @type {uyvType.uint16}
 */
let uyvHeight;
/** @type {string | null} */
let uyvCurrentFillColor = null;
/** @type {string | null} */
let uyvCurrentStrokeColor = null;
/** @type {number} */
let uyvCurrentStrokeWeight = 1;
/** @type {number} */
let uyvDeltaTime = 0;
/**
 * @ignore
 * @type {number} */
let uyvPrevTimestamp = 0;
/**
 * @ignore
 * @type {number} */
let uyvFrameCount = 0;
/**
 * @ignore
 * @type {number} */
let uyvLastFpsUpdate = 0;
/**
 * @ignore
 * @type {number} */
let uyvCurrentFps = 0;
/** @type {string} */
let uyvKey = "";
/** @type {CanvasRenderingContext2D|null} */
let uyvCanvasCtx;

// Main Functions Start --------------------------------------------------------

/**
 * Creates the main drawing canvas. It should only be
 * called once at the beginning of uyvStart()
 * @returns {{canvas: CanvasRenderingContext2D, screen: HTMLCanvasElement}}
 *
 * @param {uyvType.uint16} w
 * @param {uyvType.uint16} h
 */
function uyvCreateScreen(w, h) {
  /** @type {HTMLCanvasElement | null} */
  const canvas = document.createElement("canvas");
  canvas.id = "uyvCanvas";
  // let canvas = document.getElementById("uyvCanvas");
  if (canvas === null) {
    throw new Error("No canvas with id uyvCanvas is found");
  } else if (canvas.getContext("2d") instanceof CanvasRenderingContext2D) {
    uyvCanvasCtx = canvas.getContext("2d");
  }
  if (uyvCanvasCtx === null) {
    throw new Error("Violet Engine Error: Error creating 2D canvas");
  }

  // 8K - 7680 x 4320
  if (w &lt; 0 || w > 7680) {
    throw new Error("Screen width needs to be between 0 and 7680 (inclusive)");
  }
  if (h &lt; 0 || h > 4320) {
    throw new Error("Screen height needs to be between 0 and 4320 (inclusive)");
  }
  canvas.width = w;
  canvas.height = h;

  document.body.appendChild(canvas);

  const uyvScreen = canvas;
  uyvWidth = uyvCanvasCtx.canvas.width;
  uyvHeight = uyvCanvasCtx.canvas.height;
  return { canvas: uyvCanvasCtx, screen: uyvScreen };
}

/**
 * Initializes the UYV engine by calling uyvPreLoad (if defined) and then uyvStart.
 * @ignore
 */
function uyvInitializeEngine() {
  // Set up key event listeners
  // @ts-ignore - uyvPreLoad (optional function)
  if (typeof window.uyvPreLoad === "function") {
    // If uyvPreLoad is defined, call it and wait for it to complete before continuing
    // @ts-ignore - uyvPreLoad (optional function)
    Promise.resolve(window.uyvPreLoad())
      .then(() => {
        uyvStartEngine();
      })
      .catch((error) => {
        console.error("Error in uyvPreLoad:", error);
      });
  } else {
    // If uyvPreLoad is not defined, start the engine directly
    uyvStartEngine();
  }
}

/**
 * Handles keydown events.
 * @param {KeyboardEvent} e - The keydown event.
 * @ignore
 */
function uyvHandleKeyDown(e) {
  uyvKey = e.key;
  // @ts-ignore - uyvKeyDown (optional function)
  if (typeof window.uyvKeyDown === "function") {
    // @ts-ignore - uyvKeyDown (optional function)
    window.uyvKeyDown();
  }
}

/**
 * Handles keyup events.
 * @param {KeyboardEvent} e - The keyup event.
 * @ignore
 */
function uyvHandleKeyUp(e) {
  const releasedKey = e.key;
  // @ts-ignore - uyvKeyUp (optional function)
  if (typeof window.uyvKeyUp === "function") {
    uyvKey = releasedKey;
    // @ts-ignore - uyvKeyUp (optional function)
    window.uyvKeyUp();
  }
  if (uyvKey === releasedKey) {
    uyvKey = "";
  }
}

/**
 * Starts the engine by calling uyvStart and initiating the main loop.
 * @ignore
 */
function uyvStartEngine() {
  // @ts-ignore
  if (typeof window.uyvStart !== "function") {
    console.error(
      "No uyvStart function defined. Define function uyvStart() in your script.",
    );
    return;
  }
  // @ts-ignore
  if (typeof window.uyvUpdate !== "function") {
    console.error(
      "No uyvUpdate function defined. Define function uyvUpdate() in your script.",
    );
    return;
  }
  // @ts-ignore
  if (typeof window.uyvDraw !== "function") {
    console.error(
      "No uyvDraw function defined. Define function uyvDraw() in your script.",
    );
    return;
  }

  // @ts-ignore
  window.uyvStart();
  window.requestAnimationFrame(uyvMainLoop);
  window.addEventListener("keydown", uyvHandleKeyDown);
  window.addEventListener("keyup", uyvHandleKeyUp);
}

// /**
//  * Main loop of the engine, calls uyvUpdate and uyvDraw at approximately 60fps.
//  * @param {number} timestamp
//  * @ignore
//  */
// function uyvMainLoop(timestamp) {
//   uyvDeltaTime = (timestamp - uyvPrevTimestamp) / 1000;
//   uyvPrevTimestamp = timestamp;
//
//   window.uyvUpdate();
//   window.uyvDraw();
//
//   window.requestAnimationFrame(uyvMainLoop);
// }

/**
 * Main loop of the engine, calls uyvUpdate and uyvDraw at approximately 300fps.
 * @param {number} timestamp
 * @ignore
 */
function uyvMainLoop(timestamp) {
  uyvDeltaTime = (timestamp - uyvPrevTimestamp) / 1000;
  uyvPrevTimestamp = timestamp;

  // Update frame count for FPS calculation
  uyvFrameCount++;

  // Update FPS every second
  if (timestamp - uyvLastFpsUpdate >= 1000) {
    uyvCurrentFps = uyvFrameCount;
    uyvFrameCount = 0;
    uyvLastFpsUpdate = timestamp;
  }

  // @ts-ignore
  window.uyvUpdate();
  // @ts-ignore
  window.uyvDraw();

  // Target 300 FPS (approximately 3.33ms per frame)
  const targetFrameTime = 1000 / 300;
  const actualFrameTime = performance.now() - timestamp;
  const delay = Math.max(0, targetFrameTime - actualFrameTime);

  setTimeout(() => window.requestAnimationFrame(uyvMainLoop), delay);
}

/**
 * Returns the current frame rate.
 * @returns {number} The current frame rate.
 */
function uyvFrameRate() {
  return uyvCurrentFps;
}

/**
 * TODO description
 * @param {string} url
 * @returns {Promise&lt;{image: HTMLImageElement, data: ImageData}>}
 */
function uyvLoadImageAndData(url) {
  const image = new Image();
  image.src = url;
  return new Promise((resolve, reject) => {
    image.onload = () => {
      const canvas = document.createElement("canvas");
      canvas.width = image.width;
      canvas.height = image.height;
      const ctx = canvas.getContext("2d");
      if (ctx === null) {
        throw new Error("The browser does not support this game engine.");
      }
      ctx.drawImage(image, 0, 0);
      const imgData = ctx.getImageData(0, 0, image.width, image.height);
      resolve({ image: image, data: imgData });
    };
    image.onerror = reject;
  });
}

/**
 * TODO Description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @returns {number}
 */
function uyvGetWidth(uyvCanvasCtx) {
  // TODO uyvWidth
  return uyvCanvasCtx.canvas.width;
}

/**
 * TODO Description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @returns {number}
 */
function uyvGetHeight(uyvCanvasCtx) {
  // TODO uyvHeight
  return uyvCanvasCtx.canvas.height;
}

/**
 * TODO Description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x
 * @param {number} y
 * @returns {void}
 */
function uyvTranslate(uyvCanvasCtx, x, y) {
  uyvCanvasCtx.translate(x, y);
}

/**
 * TODO Description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x
 * @param {number} y
 * @returns {void}
 */
function uyvScale(uyvCanvasCtx, x, y) {
  uyvCanvasCtx.scale(x, y);
}

// Main Functions End ----------------------------------------------------------

// Math Functions Start --------------------------------------------------------

class uyvColor {
  /**
   * @param {number} r
   * @param {number} g
   * @param {number} b
   * @param {number} a
   */
  constructor(r, g, b, a) {
    this.r = r;
    this.g = g;
    this.b = b;
    this.a = a;
  }
}

class uyvRectangle {
  /**
   * TODO Description
   * @param {number} x
   * @param {number} y
   * @param {number} w
   * @param {number} h
   */
  constructor(x, y, w, h) {
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
  }

  /**
   * @param {uyvVector2D} element
   */
  contains(element) {
    return (
      element.x >= this.x - this.w &amp;&amp;
      element.x &lt;= this.x + this.w &amp;&amp;
      element.y >= this.y - this.h &amp;&amp;
      element.y &lt;= this.y + this.h
    );
  }

  /**
   * @param {uyvRectangle} range
   */
  intersectsCenter(range) {
    return !(
      range.x - range.w > this.x + this.w ||
      range.x + range.w &lt; this.x - this.w ||
      range.y - range.h > this.y + this.h ||
      range.y + range.h &lt; this.y - this.h
    );
  }
}

class uyvQuadTree {
  /**
   * @param {uyvRectangle} boundary
   * @param {number} n
   */
  constructor(boundary, n) {
    this.boundary = boundary;
    this.capacity = n;
		/** @type {Array&lt;uyvVector2D>}*/ this.elements = [];
    this.hasDivided = false;
  }
  /**
   * @param {uyvVector2D} element
   */
  insert(element) {
    if (!this.boundary.contains(element)) {
      return false;
    }
    if (this.elements.length &lt; this.capacity) {
      this.elements.push(element);
      return true;
    } else {
      if (!this.hasDivided) {
        this.subdivide();
      }
      if (this.ne?.insert(element)) return true;
      else if (this.nw?.insert(element)) return true;
      else if (this.se?.insert(element)) return true;
      else if (this.sw?.insert(element)) return true;
    }
  }
  subdivide() {
    let ne = new uyvRectangle(
      this.boundary.x + this.boundary.w / 2,
      this.boundary.y - this.boundary.h / 2,
      this.boundary.w / 2,
      this.boundary.h / 2,
    );
    this.ne = new uyvQuadTree(ne, this.capacity);
    let nw = new uyvRectangle(
      this.boundary.x - this.boundary.w / 2,
      this.boundary.y - this.boundary.h / 2,
      this.boundary.w / 2,
      this.boundary.h / 2,
    );
    this.nw = new uyvQuadTree(nw, this.capacity);
    let se = new uyvRectangle(
      this.boundary.x + this.boundary.w / 2,
      this.boundary.y + this.boundary.h / 2,
      this.boundary.w / 2,
      this.boundary.h / 2,
    );
    this.se = new uyvQuadTree(se, this.capacity);
    let sw = new uyvRectangle(
      this.boundary.x - this.boundary.w / 2,
      this.boundary.y + this.boundary.h / 2,
      this.boundary.w / 2,
      this.boundary.h / 2,
    );
    this.sw = new uyvQuadTree(sw, this.capacity);
    this.hasDivided = true;
  }
  /**
   * @param {uyvRectangle} rect
   */
  queryRectangle(rect) {
		/** @type {uyvVector2D[]}*/ let found = [];
    if (!this.boundary.intersectsCenter(rect)) {
      return found;
    } else {
      for (let i = 0; i &lt; this.elements.length; i++) {
        if (rect.contains(this.elements[i])) {
          found.push(this.elements[i]);
        }
      }
    }
    if (this.hasDivided) {
      if (this.ne) {
        found = found.concat(this.ne.queryRectangle(rect));
      }
      if (this.nw) {
        found = found.concat(this.nw.queryRectangle(rect));
      }
      if (this.se) {
        found = found.concat(this.se.queryRectangle(rect));
      }
      if (this.sw) {
        found = found.concat(this.sw.queryRectangle(rect));
      }
    }
    return found;
  }
  draw() {
    if (uyvCanvasCtx === null) {
      throw Error(
        "Violet Ultra Error: The screen was not created properly in uyvStart().",
      );
    }
    uyvStroke(uyvCanvasCtx, 255, 0, 0);
    uyvStrokeWeight(uyvCanvasCtx, 4);
    for (let i = 0; i &lt; this.elements.length; i++) {
      uyvCircle(uyvCanvasCtx, this.elements[i].x, this.elements[i].y, 0.1);
    }
    uyvStroke(uyvCanvasCtx, 255, 255, 255);
    uyvStrokeWeight(uyvCanvasCtx, 1);
    uyvRectStrokeCenterHalf(
      this.boundary.x,
      this.boundary.y,
      this.boundary.w,
      this.boundary.h,
    );
    if (this.hasDivided) {
      this.ne?.draw();
      this.nw?.draw();
      this.se?.draw();
      this.sw?.draw();
    }
  }
}

/**
 * TODO Description
 * @class
 */
class uyvVector2D {
  // data is a uyvQuadTree helper
  /**
   * TODO Description
   * @param {number} x - The x-coordinate of the 2D Vector
   * @param {number} y - The y-coordinate of the 2D Vector
   * @param {Object} [data] - Optional: Attaches an object to the 2DVector
   */
  constructor(x, y, data) {
    /** @type {number} */
    this.x = x;
    /** @type {number} */
    this.y = y;
    if (data) {
      this.data = data;
    }
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  static zero() {
    return new uyvVector2D(0, 0);
  }
  /**
   * TODO Description
   * @param {number} angle
   * @returns {uyvVector2D}
   */
  static fromAngle(/** @type {number} */ angle) {
    return new uyvVector2D(Math.cos(angle), Math.sin(angle));
  }
  /**
   * TODO Description
   * @param {number} val
   * @returns {uyvVector2D}
   */
  static fromValue(val) {
    return new uyvVector2D(val, val);
  }
  /**
   * TODO Description
   * @param {number} val
   * @param {number} scalar
   * @returns {uyvVector2D}
   */
  static fromScalar(val, scalar) {
    return new uyvVector2D(val * scalar, val * scalar);
  }
  /**
   * TODO Description
   * @returns {number[]}
   */
  array() {
    return [this.x, this.y];
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  div(/** @type {uyvVector2D} */ other) {
    return new uyvVector2D(this.x / other.x, this.y / other.y);
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  mult(/** @type {uyvVector2D} */ other) {
    return new uyvVector2D(this.x * other.x, this.y * other.y);
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  sub(/** @type {uyvVector2D} */ other) {
    return new uyvVector2D(this.x - other.x, this.y - other.y);
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  add(/** @type {uyvVector2D} */ other) {
    return new uyvVector2D(this.x + other.x, this.y + other.y);
  }
  /**
   * TODO Description
   * @returns {number}
   */
  lengthSqrt() {
    return this.x * this.x + this.y * this.y;
  }
  /**
   * TODO Description
   * @returns {number}
   */
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  rotate90() {
    return new uyvVector2D(-this.y, this.x);
  }
  /**
   * TODO Description
   * @returns {number}
   */
  distanceToSqrt(/** @type {uyvVector2D} */ other) {
    return other.sub(this).lengthSqrt();
  }
  /**
   * TODO Description
   * @returns {number}
   */
  distanceTo(/** @type {uyvVector2D} */ other) {
    return other.sub(this).length();
  }
  /**
   * Scales the vector by a scalar value
   * @param {number} value - The scalar value to multiply the vector by
   * @returns {uyvVector2D}
   */
  scale(value) {
    return new uyvVector2D(this.x * value, this.y * value);
  }
  /**
   * TODO Description
   * @returns {uyvVector2D}
   */
  normalize() {
    const len = this.length();
    if (len === 0) {
      return new uyvVector2D(0, 0);
    }
    return new uyvVector2D(this.x / len, this.y / len);
  }
  /**
   * TODO Description
   * @param {uyvVector2D} other type uyvVector2D
   * @param {number} t type number
   * @returns {uyvVector2D} uyvVector2D
   */
  lerp(other, t) {
    return other.sub(this).scale(t).add(this);
  }
  /**
   * TODO Description
   * @param {uyvVector2D} other type uyvVector2D
   * @returns {number} number
   */
  dot(other) {
    return this.x * other.x + this.y * other.y;
  }
  /**
   * Applies a mapping function to both x and y components of the vector.
   * @param {function(number): number} f - A function that takes a number and returns a number.
   * @returns {uyvVector2D} A new vector with the function applied to both x and y.
   */
  mapFunc(f) {
    return new uyvVector2D(f(this.x), f(this.y));
  }
}

// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript
/**
 * @ignore
 */
function xoshiro128ss(a, b, c, d) {
  return function() {
    let t = b &lt;&lt; 9,
      r = b * 5;
    r = ((r &lt;&lt; 7) | (r >>> 25)) * 9;
    c ^= a;
    d ^= b;
    b ^= c;
    a ^= d;
    c ^= t;
    d = (d &lt;&lt; 11) | (d >>> 21);
    return (r >>> 0) / 4294967296;
  };
}

function uyvRandom() {
  // const seedgen = () => (Math.random() * 2 ** 32) >>> 0;
  // const rand = xoshiro128ss(seedgen(), seedgen(), seedgen(), seedgen());
  // if (!uyvIsNumber(min) || !uyvIsNumber(max)) {
  //   console.warn("uyvRandom: params have to be numbers.");
  //   return rand();
  // }
  // if (min > max) {
  //   const tmp = min;
  //   min = max;
  //   max = tmp;
  // }
  // return rand() * (max - min) + min;
  if (arguments.length === 0) {
    return Math.random();
  }
  if (arguments.length === 1) {
    if (!uyvIsNumber(arguments[0])) {
      console.warn("Violet Ultra Error: Expects a number");
      return Math.random();
    }
    const min = 0;
    const max = arguments[0];
    return Math.random() * (max - min) + min;
  } else if (arguments.length === 2) {
    if (!uyvIsNumber(arguments[0]) &amp;&amp; !uyvIsNumber(arguments[1])) {
      console.warn("Violet Ultra Error: Expects a number");
      return Math.random();
    }
    const min = arguments[0];
    const max = arguments[1];
    return Math.random() * (max - min) + min;
  } else {
    throw new Error("Violet Ultra Error: uyvRandom takes 0 to 2 arguments.");
  }
}

// Math Functions End ----------------------------------------------------------

// Style Start -----------------------------------------------------------------

function uyvDist2D() {
  if (arguments.length === 4) {
    let x1 = arguments[0];
    let y1 = arguments[1];
    let x2 = arguments[2];
    let y2 = arguments[3];

    let dx = x2 - x1;
    let dy = y2 - y1;

    return Math.sqrt(dx * dx + dy * dy);
  } else {
    throw new Error("uyvDist2D() requires either 4 parameters (2D)");
  }
}

function uyvDist3D() {
  if (arguments.length === 6) {
    // 3D distance
    let x1 = arguments[0];
    let y1 = arguments[1];
    let z1 = arguments[2];
    let x2 = arguments[3];
    let y2 = arguments[4];
    let z2 = arguments[5];

    let dx = x2 - x1;
    let dy = y2 - y1;
    let dz = z2 - z1;

    return Math.sqrt(dx * dx + dy * dy + dz * dz);
  } else {
    throw new Error("uyvDist3D() requires either 6 parameters (3D)");
  }
}

/**
 * TODO description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @returns {void} void
 */
function uyvPush(uyvCanvasCtx) {
  uyvCanvasCtx.save();
}

/**
 * TODO description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @returns {void} void
 */
function uyvPop(uyvCanvasCtx) {
  uyvCanvasCtx.restore();
}

/**
 * TODO Description
 * @ignore
 * @param {uyvType.uint8} r - red (0-255) inclusive
 * @param {uyvType.uint8} g - green (0-255) inclusive
 * @param {uyvType.uint8} b - blue (0-255) inclusive
 * @returns {{ r: uyvType.uint8, g: uyvType.uint8, b: uyvType.uint8}}
 */
function uyvClampRGB(r, g, b) {
  r = uyvType.NormalizeUint8s(r);
  g = uyvType.NormalizeUint8s(g);
  b = uyvType.NormalizeUint8s(b);
  return { r: r, g: g, b: b };
}

/**
 * Converts rbg to Hex
 * @ignore
 * @param {uyvType.uint8} r - red (0-255) inclusive
 * @param {uyvType.uint8} g - green (0-255) inclusive
 * @param {uyvType.uint8} b - blue (0-255) inclusive
 * @returns {string}
 */
function uyvClampConvertRgbHexString(r, g, b) {
  const color = uyvClampRGB(r, g, b);
  /**
   * @param {number} c
   * @returns {string}
   */
  const toHex = (c) => c.toString(16).padStart(2, "0");
  return `#${toHex(color.r)}${toHex(color.g)}${toHex(color.b)}`;
}

/**
 * TODO description
 * @param {uyvType.uint8} val map (0 - 255) to (0 - 1) inclusive
 * @returns {number} number
 */
function uyvNormalizeAlpha(val) {
  return Math.max(0, Math.min(1, val / 255));
}

/**
 * TODO description
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {uyvType.uint8} r - red (0-255) inclusive
 * @param {uyvType.uint8} g - green (0-255) inclusive
 * @param {uyvType.uint8} b - blue (0-255) inclusive
 * @param {uyvType.uint8} a - blue (0-1) inclusive, optional
 * @returns {void} void
 */
function uyvFill(uyvCanvasCtx, r, g, b, a = 1) {
  // TODO Fix
  // clamp a from 0 (incl) to 1 (incl)
  uyvCurrentFillColor = `rgba(${r}, ${g}, ${b}, ${a})`;
  uyvCanvasCtx.fillStyle = uyvCurrentFillColor;
}

/**
 * TODO description
 * @returns {void} void
 */
function uyvNoFill() {
  uyvCurrentFillColor = null;
}

/**
 * Sets the color used to draw points, lines, and the
 * outlines of shapes
 *
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {uyvType.uint8} r - red (0-255) inclusive
 * @param {uyvType.uint8} g - green (0-255) inclusive
 * @param {uyvType.uint8} b - blue (0-255) inclusive
 * @param {uyvType.uint8} a - blue (0-1) inclusive, optional
 * @returns {void} void
 */
function uyvStroke(uyvCanvasCtx, r, g, b, a = 1) {
  // TODO Fix
  // clamp a from 0 (incl) to 1 (incl)
  // a = uyvNormalizeAlpha(uyvType.SetUint8(a));
  uyvCurrentStrokeColor = `rgba(${r}, ${g}, ${b}, ${a})`;
  uyvCanvasCtx.strokeStyle = uyvCurrentStrokeColor;
}

/**
 * Disables drawing points, lines, and the outlines of shapes.
 * @returns {void} void
 */
function uyvNoStroke() {
  uyvCurrentStrokeColor = null;
}

/**
 * Sets the width of the stroke used for points, lines, and the outlines of
 * shapes.
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} weight
 * @returns {void} void
 */
function uyvStrokeWeight(uyvCanvasCtx, weight) {
  // Min stroke weight
  const actualWeight = Math.max(0, weight);
  uyvCurrentStrokeWeight = actualWeight;
  uyvCanvasCtx.lineWidth = actualWeight;
}

/**
 * Sets the color used for the background of the screen.
 * @param {CanvasRenderingContext2D|null}  canvasCtx,
 * @param {uyvType.uint8} r - red (0-255) inclusive
 * @param {uyvType.uint8} g - green (0-255) inclusive
 * @param {uyvType.uint8} b - blue (0-255) inclusive
 * @returns {void} void
 */
function uyvBackground(r, g, b, canvasCtx = uyvCanvasCtx) {
  if (canvasCtx instanceof CanvasRenderingContext2D &amp;&amp; canvasCtx !== null) {
    canvasCtx.fillStyle = uyvClampConvertRgbHexString(r, g, b);
    uyvRectFill(
      canvasCtx,
      0,
      0,
      uyvGetWidth(canvasCtx),
      uyvGetHeight(canvasCtx),
    );
  }
}

// Style End -------------------------------------------------------------------

// Shape Start -----------------------------------------------------------------

/**
 * Draws a straight line between two points.
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x1 x-coordinate of the first point
 * @param {number} y1 y-coordinate of the first point
 * @param {number} x2 x-coordinate of the second point
 * @param {number} y2 y-coordinate of the second point
 * @returns {void} void
 */
function uyvLine(uyvCanvasCtx, x1, y1, x2, y2) {
  uyvCanvasCtx.beginPath();
  uyvCanvasCtx.moveTo(x1, y1);
  uyvCanvasCtx.lineTo(x2, y2);
  if (uyvCurrentStrokeColor) {
    uyvCanvasCtx.stroke();
  } else {
    throw new Error("A stroke color is needed to draw a line.");
  }
}

/**
 * Draws a point at x and y
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x x-coordinate of the point
 * @param {number} y y-coordinate of the point
 * @param {number} [radius=3] - Optional. The radius of the point
 * @returns {void} void
 */
function uyvPoint(uyvCanvasCtx, x, y, radius = 3) {
  uyvCanvasCtx.beginPath();
  const actualRadius = Math.max(0.0000000009, radius);
  uyvCanvasCtx.arc(x, y, actualRadius, 0, 2 * Math.PI);
  if (uyvCurrentFillColor) {
    uyvCanvasCtx.fill();
  }
  if (uyvCurrentStrokeColor) {
    uyvCanvasCtx.stroke();
  }
}

/**
 * Draws a circle at x and y (center) and a given radius.
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x x-coordinate of the circle
 * @param {number} y y-coordinate of the circle
 * @param {number} radius radius of the circle
 * @returns {void} void
 */
function uyvCircle(uyvCanvasCtx, x, y, radius) {
  uyvCanvasCtx.beginPath();
  const actualRadius = Math.max(0, radius);
  uyvCanvasCtx.arc(x, y, actualRadius, 0, 2 * Math.PI);
  if (uyvCurrentFillColor) {
    uyvCanvasCtx.fill();
  }
  if (uyvCurrentStrokeColor) {
    uyvCanvasCtx.stroke();
  }
}

/**
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x
 * @param {number} y
 * @param {number} w
 * @param {number} h
 * @returns {void} void
 */
function uyvRectFill(uyvCanvasCtx, x, y, w, h) {
  uyvCanvasCtx.fillRect(x, y, w, h);
}

/**
 * @param {CanvasRenderingContext2D|null} canvasCtx
 * @param {number} x
 * @param {number} y
 * @param {number} w
 * @param {number} h
 */
function uyvRectFillCenter(x, y, w, h, canvasCtx = uyvCanvasCtx) {
  if (canvasCtx === null) {
    throw new Error("Violet Ultra Error: Error the canvas is null");
  } else if (canvasCtx instanceof CanvasRenderingContext2D) {
    canvasCtx.save();
    canvasCtx.translate(x, y);
    canvasCtx.fillRect(-x, -y, w, h);
    canvasCtx.restore();
  }
}

/**
 * @param {CanvasRenderingContext2D} uyvCanvasCtx
 * @param {number} x
 * @param {number} y
 * @param {number} w
 * @param {number} h
 * @returns {void} void
 */
function uyvRectStroke(uyvCanvasCtx, x, y, w, h) {
  uyvCanvasCtx.strokeRect(x, y, w, h);
}

/**
 * @param {number} x - X coordinate of the rectangle's center
 * @param {number} y - Y coordinate of the rectangle's center
 * @param {number} w - Width of the rectangle
 * @param {number} h - Height of the rectangle
 * @param {CanvasRenderingContext2D|null} canvasCtx
 */
function uyvRectStrokeCenter(x, y, w, h, canvasCtx = uyvCanvasCtx) {
  if (canvasCtx === null) {
    throw new Error("Violet Ultra Error: Error the canvas is null");
  } else if (canvasCtx instanceof CanvasRenderingContext2D) {
    canvasCtx.save();
    canvasCtx.translate(x, y);
    canvasCtx.strokeRect(-w, -h, w, h);
    canvasCtx.restore();
  }
}

/**
 * @param {number} x - X coordinate of the rectangle's center
 * @param {number} y - Y coordinate of the rectangle's center
 * @param {number} w - Width of the rectangle
 * @param {number} h - Height of the rectangle
 * @param {CanvasRenderingContext2D|null} canvasCtx
 */
function uyvRectStrokeCenterHalf(x, y, w, h, canvasCtx = uyvCanvasCtx) {
  if (canvasCtx === null) {
    throw new Error("Violet Ultra Error: Error the canvas is null");
  } else if (canvasCtx instanceof CanvasRenderingContext2D) {
    canvasCtx.save();
    canvasCtx.translate(x, y);
    canvasCtx.strokeRect(-w, -h, w * 2, h * 2);
    canvasCtx.restore();
  }
}

// Shape End -------------------------------------------------------------------

// Delay the initialization to ensure all scripts have loaded
window.addEventListener("load", function() {
  uyvInitializeEngine();
});
</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="uyvColor.html">uyvColor</a></div><div class="sidebar-section-children"><a href="uyvQuadTree.html">uyvQuadTree</a></div><div class="sidebar-section-children"><a href="uyvRectangle.html">uyvRectangle</a></div><div class="sidebar-section-children"><a href="uyvVector2D.html">uyvVector2D</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-namespaces"><div>Namespaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="uyvType.html">uyvType</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#uyvBackground">uyvBackground</a></div><div class="sidebar-section-children"><a href="global.html#uyvCanvasCtx">uyvCanvasCtx</a></div><div class="sidebar-section-children"><a href="global.html#uyvCircle">uyvCircle</a></div><div class="sidebar-section-children"><a href="global.html#uyvCreateScreen">uyvCreateScreen</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentFillColor">uyvCurrentFillColor</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentStrokeColor">uyvCurrentStrokeColor</a></div><div class="sidebar-section-children"><a href="global.html#uyvCurrentStrokeWeight">uyvCurrentStrokeWeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvDeltaTime">uyvDeltaTime</a></div><div class="sidebar-section-children"><a href="global.html#uyvFill">uyvFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvFrameRate">uyvFrameRate</a></div><div class="sidebar-section-children"><a href="global.html#uyvGetHeight">uyvGetHeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvGetWidth">uyvGetWidth</a></div><div class="sidebar-section-children"><a href="global.html#uyvInfinity">uyvInfinity</a></div><div class="sidebar-section-children"><a href="global.html#uyvKey">uyvKey</a></div><div class="sidebar-section-children"><a href="global.html#uyvLine">uyvLine</a></div><div class="sidebar-section-children"><a href="global.html#uyvLoadImageAndData">uyvLoadImageAndData</a></div><div class="sidebar-section-children"><a href="global.html#uyvNoFill">uyvNoFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvNoStroke">uyvNoStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvNormalizeAlpha">uyvNormalizeAlpha</a></div><div class="sidebar-section-children"><a href="global.html#uyvPoint">uyvPoint</a></div><div class="sidebar-section-children"><a href="global.html#uyvPop">uyvPop</a></div><div class="sidebar-section-children"><a href="global.html#uyvPush">uyvPush</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectFill">uyvRectFill</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectFillCenter">uyvRectFillCenter</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStroke">uyvRectStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStrokeCenter">uyvRectStrokeCenter</a></div><div class="sidebar-section-children"><a href="global.html#uyvRectStrokeCenterHalf">uyvRectStrokeCenterHalf</a></div><div class="sidebar-section-children"><a href="global.html#uyvScale">uyvScale</a></div><div class="sidebar-section-children"><a href="global.html#uyvStroke">uyvStroke</a></div><div class="sidebar-section-children"><a href="global.html#uyvStrokeWeight">uyvStrokeWeight</a></div><div class="sidebar-section-children"><a href="global.html#uyvTranslate">uyvTranslate</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>